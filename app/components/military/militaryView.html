<div ng-controller="MilitaryController">
    <script type="text/ng-template" id="militaryView.html">
        <div id="Army" class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <h3>
                        <span class="glyphicon glyphicon-screenshot"></span> Army
                    </h3>
                    <hr>
                    <div class="row">
                        <div id="militaryResources" class="col-xs-12">
                            <div class="panel panel-primary">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fas fa-money-bill-alt"></i> -{{military.getTotalUpkeep()}}/turn
                                        </div>
                                        <div class="col-xs-3">
                                            <i class="fas fa-male"></i> {{countryData.unitCap}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div id="military" class="col-xs-12">
                            <div class="row">
                                <div class="col-xs-9 font-9pt">
                                    <div class="row modalOverflow-600">
                                        <div ng-repeat="unit in military.unitsAtHome track by $index">
                                        <!-- Hide on xs/sm -->
                                            <div class="hidden-xs hidden-sm">
                                                <div class="col-xs-4"
                                                     ng-class="{'invisible': !unit.isUnlocked}">
                                                    <!--TODO: Change class to hidden, instead of invisible, to remove the empty space between unlocked and locked units-->
                                                    <div class="row">
                                                        <div class="col-xs-4 col-xs-offset-4">
                                                            <div class="text-center noBottom-border">
                                                                {{unit.count}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="panel panel-primary panelLocked clickableArea panelUnlocked">
                                                        <div class="row text-center">
                                                            <h4>{{unit.name}}</h4>
                                                        </div>
                                                        <div class="row text-center">
                                                            <div class="col-xs-4">
                                                                <i class="fas fa-fire"></i> {{military.getAttack(unit.id)}}
                                                            </div>
                                                            <div class="col-xs-4">
                                                                <i class="fas fa-shield-alt"></i> {{military.getDefense(unit.id)}}
                                                            </div>
                                                            <div class="col-xs-4">
                                                                <i class="glyphicon glyphicon-tower"></i> {{military.getSiege(unit.id)}}
                                                            </div>
                                                        </div>
                                                        <div class="row text-center">
                                                            <div class="col-xs-4">
                                                                <i class="fas fa-redo-alt"></i> {{military.getUpkeep(unit.id)}}
                                                            </div>
                                                            <div class="col-xs-4">
                                                                <i class="fas fa-male"></i> {{military.getPopulationCost(unit.id)}}
                                                            </div>
                                                            <div class="col-xs-4">
                                                                <i class="fas fa-angle-double-up"></i> {{military.getTrainingSpeed(unit.id)}}
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12">
                                                                <button class="btn btn-block btn-success"
                                                                        ng-click="military.buyQueue(1, unit.id)">
                                                                    Hire - <i class="fas fa-money-bill-alt"></i>
                                                                    {{military.getCost(unit.id)}}
                                                                    <i class="fas fa-male"></i>
                                                                    {{military.getPopulationCost(unit.id)}}
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Fix for different sizes columns -->
                                                <div ng-class="($index + 1)%3 === 0 && $index !== 0 ? 'clearfix' : ''"></div>
                                            </div>

                                            <!-- Hide on md/lg -->
                                            <div class="hidden-md hidden-lg">
                                                <div class="col-xs-12">
                                                    <div class="row bottom-border margin-bottom-5">
                                                        <div class="col-xs-6 col-sm-8">
                                                            <div class="row">
                                                                <div class="col-xs-12">
                                                                    <div class="row">
                                                                        <div class="col-xs-12 text-center">
                                                                            <span class="tag label label-default center-block">{{unit.name}}({{unit.count}})</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="fas fa-fire"></i> {{military.getAttack(unit.id)}}
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="fas fa-shield-alt"></i> {{military.getDefense(unit.id)}}
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="glyphicon glyphicon-tower"></i> {{military.getSiege(unit.id)}}
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="fas fa-redo-alt"></i> {{military.getUpkeep(unit.id)}}
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="fas fa-male"></i> {{military.getPopulationCost(unit.id)}}
                                                                        </div>
                                                                        <div class="col-xs-6 col-sm-4">
                                                                            <i class="fas fa-angle-double-up"></i> {{military.getTrainingSpeed(unit.id)}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-6 col-sm-4">
                                                            <button class="btn btn-block btn-success"
                                                                    ng-click="military.buyQueue(1, unit.id)">
                                                                 <i class="fas fa-money-bill-alt"></i>
                                                                {{military.getCost(unit.id) | niceNumber}}
                                                                <i class="fas fa-male"></i>
                                                                {{military.getPopulationCost(unit.id) | niceNumber}}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-3 unitRecruitment">
                                    <h3 class="text-center">Hiring Queue</h3>
                                    <div class="row" ng-repeat="unit in military.unitsHiringQueue track by $index"
                                         ng-init="outerIndex=$index">
                                        <div class="col-xs-12">
                                            <div class="row text-center" ng-repeat="unitQueue in unit track by $index"
                                                 ng-init="innerIndex=$index">
                                                {{unitQueue.name}} x {{unitQueue.count}}
                                                <uib-progressbar
                                                        value="(100 - unitQueue.time/unitQueue.trainingSpeed * 100)">
                                                    <span>{{unitQueue.time}} turn/s</span>
                                                    <span>
                                                <a class="pull-right text-danger"
                                                   ng-click="military.cancelQueue(outerIndex, innerIndex)">
                                                    <i class="fas fa-2x fa-ban"></i>
                                                </a>
                                            </span>
                                                </uib-progressbar>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
</div>